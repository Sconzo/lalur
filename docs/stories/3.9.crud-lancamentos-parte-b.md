# Story 3.9: CRUD de Lançamentos da Parte B (Manual)

**Como** CONTADOR,
**Eu quero** criar, listar, visualizar, editar e inativar Lançamentos da Parte B manualmente,
**Para que** eu possa registrar ajustes fiscais (adições/exclusões) IRPJ/CSLL com fundamentação via parâmetros tributários.

## Acceptance Criteria

1. Controller `LancamentoParteBController` criado com endpoints CRUD completo
2. DTOs criados: `CreateLancamentoParteBRequest`, `UpdateLancamentoParteBRequest`, `LancamentoParteBResponse`
3. `CreateLancamentoParteBRequest` com campos:
   - mesReferencia, anoReferencia, tipoApuracao, tipoRelacionamento
   - contaContabilId, contaParteBId (nullable conforme tipoRelacionamento)
   - parametroTributarioId (obrigatório)
   - tipoAjuste, descricao, valor
4. Use cases implementados:
   - `CreateLancamentoParteBUseCase`: valida company, parametroTributario, FKs condicionais
   - `ListLancamentoParteBUseCase`: retorna lançamentos da empresa
   - `GetLancamentoParteBUseCase`: retorna por ID
   - `UpdateLancamentoParteBUseCase`: permite editar com revalidações
   - `ToggleLancamentoParteBStatusUseCase`: alterna status
5. Validações:
   - mesReferencia entre 1 e 12
   - anoReferencia >= 2000 e <= ano atual + 1
   - parametroTributarioId deve existir e estar ACTIVE
   - Validações condicionais de FKs conforme tipoRelacionamento
   - valor > 0
6. Listagem suporta filtros: anoReferencia, mesReferencia, tipoApuracao, tipoAjuste, status
7. Teste valida:
   - Criação com todos tipos de relacionamento
   - Validações de FK condicional funcionam
   - Rejeita parametroTributario inexistente ou INACTIVE
   - Rejeita contas de outra empresa
   - Filtros funcionam corretamente

## Technical Notes

- **Validação de FK condicional**: Implementar lógica customizada baseada em tipoRelacionamento
- **Fundamentação fiscal obrigatória**: parametroTributarioId sempre requerido
- **CompanyContext**: Validação de empresa via header X-Company-Id

## Definition of Done

- [ ] Controller com todos endpoints
- [ ] DTOs criados e validados
- [ ] Use cases implementados
- [ ] Validações condicionais implementadas
- [ ] Testes de integração passando
- [ ] Documentação Swagger
- [ ] Code review
- [ ] Merge em develop
